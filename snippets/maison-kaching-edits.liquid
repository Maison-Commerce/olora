<!-- MAISON KACHING EDITS -->
<script>
  async function waitForKaching() {
    return new Promise(async (resolve) => {
      let el;
      while (!el) {
        el = document.querySelector('.kaching-bundles__bar-container');
        console.log('kaching-bundle not found, waiting for 100ms');
        await new Promise((x) => setTimeout(x, 100));
      }

      resolve();
    });
  }

  function addNumbers() {
    setInterval(async () => {
      await waitForKaching();
      const bars = document.querySelectorAll('.kaching-bundles__bar-container');
      for (let barindex = 0; barindex < bars.length; barindex++) {
        const bar = bars[barindex];
        const containers = Array.from(bar.querySelectorAll('img')).map((img) => img.parentElement);

        for (const containerindex = 0; containerindex < containers.length; containerindex++) {
          const container = containers[containerindex];
          container.style.position = 'relative';

          const id = `bar-${barindex}-container-${containerindex}`;
          if (document.getElementById(id)) continue;

          const div = document.createElement('div');
          div.id = id;
          div.innerText = (containerindex + 1).toString();
          div.style.position = 'absolute';
          div.style.top = '0';
          div.style.left = '0';
          div.style.backgroundColor = 'white';
          div.style.color = 'black';
          div.style.padding = '4px 8px';
          div.style.borderRadius = '0';

          container.appendChild(div);

          console.log('[MAISON KACHING EDITS] added number', id);
        }
      }
    }, 100);
  }
</script>
